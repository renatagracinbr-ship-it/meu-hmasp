<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HMASP Chat - Central de Regula√ß√£o</title>
    <link rel="stylesheet" href="./src/styles/main.css">
</head>

<body>
    <!-- Telas de Login removidas - Acesso direto -->
    <div id="login-screen" style="display: none;"></div>
    <div id="waiting-screen" style="display: none;"></div>

    <div id="app" style="display: flex;">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo-left">
                    <img src="./public/Arquivos/Novo simbolo HMASP.png" alt="S√≠mbolo HMASP" id="logo-hmasp">
                </div>
                <div class="header-title">
                    <h1>Hospital Militar de √Årea de S√£o Paulo</h1>
                    <h2>Central de Regula√ß√£o ‚Äì Marca√ß√£o de Consultas ‚Äì HMASP Chat</h2>
                </div>
                <div class="logo-right">
                    <img src="./public/Arquivos/Logotipo Central de Regulacao.jpg" alt="Central de Regula√ß√£o" id="logo-central">
                </div>
            </div>
        </header>

        <!-- Modern Navigation Menu -->
        <nav class="modern-nav">
            <button class="nav-item active" data-tab="chat">
                <svg class="nav-icon" viewBox="0 0 24 24" width="18" height="18">
                    <path fill="currentColor"
                        d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z" />
                </svg>
                <span class="nav-text">Chat</span>
            </button>
            <button class="nav-item" data-tab="acoes">
                <svg class="nav-icon" viewBox="0 0 24 24" width="18" height="18">
                    <path fill="currentColor"
                        d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z" />
                </svg>
                <span class="nav-text">A√ß√µes</span>
                <span class="nav-badge" id="acoes-badge" style="display: none;">0</span>
            </button>
            <button class="nav-item" data-tab="confirmacao">
                <svg class="nav-icon" viewBox="0 0 24 24" width="18" height="18">
                    <path fill="currentColor" d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z" />
                </svg>
                <span class="nav-text">Confirma√ß√£o de Presen√ßa</span>
            </button>
            <button class="nav-item" data-tab="desmarcacao">
                <svg class="nav-icon" viewBox="0 0 24 24" width="18" height="18">
                    <path fill="currentColor"
                        d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
                </svg>
                <span class="nav-text">Desmarca√ß√£o de Consultas</span>
            </button>
            <button class="nav-item" data-tab="notificacao">
                <svg class="nav-icon" viewBox="0 0 24 24" width="18" height="18">
                    <path fill="currentColor"
                        d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z" />
                </svg>
                <span class="nav-text">Notificacao aos Faltantes</span>
            </button>
            <button class="nav-item" data-tab="consultas-paciente">
                <svg class="nav-icon" viewBox="0 0 24 24" width="18" height="18">
                    <path fill="currentColor"
                        d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" />
                </svg>
                <span class="nav-text">Consultas do Paciente</span>
            </button>
            <button class="nav-item" data-tab="config">
                <svg class="nav-icon" viewBox="0 0 24 24" width="18" height="18">
                    <path fill="currentColor"
                        d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z" />
                </svg>
                <span class="nav-text">Configura√ß√µes</span>
            </button>

            <!-- Bot√£o de Logout removido (sem autentica√ß√£o) -->
        </nav>

        <!-- Tab Contents -->
        <main class="content">
            <!-- Aba 1: Chat Proprio (Meu HMASP) -->
            <div id="chat-tab" class="tab-content active">
                <div class="chat-container">
                    <!-- Status de Conexao (oculto - chat proprio sempre conectado) -->
                    <div class="whatsapp-status" id="whatsapp-status" style="display: none;">
                        <div class="status-disconnected">
                            <h3>Carregando chat...</h3>
                            <div id="qr-code"></div>
                            <button id="reconnect-btn" style="display: none;">Reconectar</button>
                        </div>
                    </div>

                    <!-- Chat Interface -->
                    <div class="chat-interface" id="chat-interface" style="display: flex;">
                        <!-- Sidebar with conversations -->
                        <aside class="chat-sidebar">
                            <div class="sidebar-header">
                                <h3>Conversas com Pacientes</h3>
                                <div class="sidebar-actions">
                                    <button id="new-chat-btn" title="Nova conversa">
                                        <svg viewBox="0 0 24 24" width="24" height="24">
                                            <path fill="currentColor"
                                                d="M19.005 3.175H4.674C3.642 3.175 3 3.789 3 4.821V21.02l3.544-3.514h12.461c1.033 0 2.064-1.06 2.064-2.093V4.821c-.001-1.032-1.032-1.646-2.064-1.646zm-4.989 9.869H7.041V11.1h6.975v1.944zm3-4H7.041V7.1h9.975v1.944z">
                                            </path>
                                        </svg>
                                    </button>
                                    <button id="search-chats-btn" title="Pesquisar">
                                        <svg viewBox="0 0 24 24" width="24" height="24">
                                            <path fill="currentColor"
                                                d="M15.009 13.805h-.636l-.22-.219a5.184 5.184 0 0 0 1.256-3.386 5.207 5.207 0 1 0-5.207 5.208 5.183 5.183 0 0 0 3.385-1.255l.221.22v.635l4.004 3.999 1.194-1.195-3.997-4.007zm-4.808 0a3.605 3.605 0 1 1 0-7.21 3.605 3.605 0 0 1 0 7.21z">
                                            </path>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            <div class="search-box" id="search-box" style="display: none;">
                                <input type="text" id="search-input" placeholder="Buscar paciente...">
                            </div>
                            <div class="conversations-list" id="conversations-list">
                                <!-- Conversations will be loaded here -->
                            </div>
                        </aside>

                        <!-- Modal Nova Conversa -->
                        <div class="modal" id="new-chat-modal" style="display: none;">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h3>Nova Conversa</h3>
                                    <button class="modal-close" id="close-new-chat">&times;</button>
                                </div>
                                <div class="modal-body">
                                    <p>Digite o prontuario ou identificador do paciente</p>
                                    <input type="text" id="new-chat-number" placeholder="Prontuario do paciente" maxlength="20">
                                </div>
                                <div class="modal-footer">
                                    <button class="btn-cancel" id="cancel-new-chat">Cancelar</button>
                                    <button class="btn-confirm" id="confirm-new-chat">Iniciar Conversa</button>
                                </div>
                            </div>
                        </div>

                        <!-- Main chat area -->
                        <section class="chat-main">
                            <div class="no-chat-selected" id="no-chat-selected">
                                <div class="no-chat-content">
                                    <h2>Meu HMASP - Chat</h2>
                                    <p>Selecione uma conversa ou inicie um novo chat com um paciente</p>
                                </div>
                            </div>

                            <div class="chat-active" id="chat-active" style="display: none;">
                                <!-- Chat Header -->
                                <div class="chat-header">
                                    <!-- Esquerda: Info do paciente -->
                                    <div class="chat-header-info">
                                        <div class="contact-avatar" id="contact-avatar"></div>
                                        <div class="contact-info">
                                            <h3 id="contact-name">Nome do Paciente</h3>
                                            <span id="contact-status" class="contact-status">Paciente</span>
                                        </div>
                                    </div>

                                    <!-- Direita: Acoes -->
                                    <div class="chat-header-actions">
                                        <button id="chat-info-btn" title="Informacoes">
                                            <svg viewBox="0 0 24 24" width="24" height="24">
                                                <path fill="currentColor"
                                                    d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z">
                                                </path>
                                            </svg>
                                        </button>
                                    </div>
                                </div>

                                <!-- Messages Area -->
                                <div class="messages-container" id="messages-container">
                                    <div class="messages-list" id="messages-list">
                                        <!-- Messages will be loaded here -->
                                    </div>
                                </div>

                                <!-- Input Area -->
                                <div class="chat-input">
                                    <div class="input-wrapper">
                                        <textarea id="message-input" placeholder="Digite uma mensagem..."
                                            rows="1"></textarea>
                                    </div>
                                    <button class="send-btn" id="send-btn">
                                        <svg viewBox="0 0 24 24" width="24" height="24">
                                            <path fill="currentColor"
                                                d="M1.101 21.757L23.8 12.028 1.101 2.3l.011 7.912 13.623 1.816-13.623 1.817-.011 7.912z">
                                            </path>
                                        </svg>
                                    </button>
                                </div>
                            </div>

                            <!-- Contact Info Panel (Sidebar) -->
                            <div class="contact-info-panel" id="contact-info-panel">
                                <div class="contact-info-header">
                                    <button class="close-info-btn" id="close-info-btn" title="Fechar">
                                        <svg viewBox="0 0 24 24" width="24" height="24">
                                            <path fill="currentColor"
                                                d="M19.1 17.2l-5.3-5.3 5.3-5.3-1.8-1.8-5.3 5.4-5.3-5.3-1.8 1.7 5.3 5.3-5.3 5.3L6.7 19l5.3-5.3 5.3 5.3 1.8-1.8z">
                                            </path>
                                        </svg>
                                    </button>
                                    <h3>Informacoes do Paciente</h3>
                                </div>

                                <div class="contact-info-body">
                                    <!-- Foto e Nome -->
                                    <div class="contact-profile">
                                        <div class="contact-profile-photo" id="info-contact-photo"></div>
                                        <h2 id="info-contact-name">Nome do Paciente</h2>
                                        <p id="info-contact-subtitle" class="contact-subtitle"></p>
                                    </div>

                                    <!-- Secao: Prontuario -->
                                    <div class="info-section">
                                        <h4>Prontuario</h4>
                                        <p id="info-contact-phone" class="info-value">-</p>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>
            </div>

            <!-- Aba 2: A√ß√µes Pendentes (AGHUse) -->
            <div id="acoes-tab" class="tab-content">
                <div class="confirmacao-container">
                    <!-- Header com controles -->
                    <div class="confirmacao-header">
                        <h2>A√ß√µes Pendentes</h2>
                        <p class="header-subtitle">Consultas que precisam de a√ß√£o no AGHUse</p>

                        <!-- Status inline -->
                        <div class="header-status header-status-acoes">
                            <div class="status-item-inline">
                                <span class="status-label-inline">Sincroniza√ß√£o</span>
                                <span class="status-indicator" id="acoes-sync-indicator">üü¢ Ativo</span>
                            </div>
                        </div>
                    </div>

                    <!-- Estat√≠sticas -->
                    <div class="confirmacao-stats">
                        <div class="stat-card" data-filter-acoes="all" style="cursor: pointer;"
                            title="Clique para ver todas as a√ß√µes">
                            <div class="stat-icon">üìã</div>
                            <div class="stat-value" id="stat-total-acoes">0</div>
                            <div class="stat-label">Total de A√ß√µes</div>
                        </div>
                        <div class="stat-card stat-declined" data-filter-acoes="desmarcar" style="cursor: pointer;"
                            title="Clique para filtrar desmarca√ß√µes">
                            <div class="stat-icon">üî¥</div>
                            <div class="stat-value" id="stat-desmarcar">0</div>
                            <div class="stat-label">Desmarcar<br>(Paciente n√£o ir√°)</div>
                        </div>
                        <div class="stat-card stat-success" data-filter-acoes="reagendar" style="cursor: pointer;"
                            title="Clique para filtrar reagendamentos">
                            <div class="stat-icon">üü†</div>
                            <div class="stat-value" id="stat-reagendar">0</div>
                            <div class="stat-label">Reagendar<br>(Paciente solicitou)</div>
                        </div>
                    </div>

                    <!-- Lista de a√ß√µes pendentes -->
                    <div class="confirmacoes-list-container">
                        <div class="list-header">
                            <h3>üéØ A√ß√µes Pendentes para o Operador</h3>
                            <div class="list-search-controls">
                                <input type="text" id="search-acoes" class="search-input"
                                    placeholder="üîç Buscar por nome do paciente..." autocomplete="off" />
                                <select id="filter-tipo-acao" class="filter-select">
                                    <option value="all">Todos os tipos</option>
                                    <option value="desmarcar">Desmarcar</option>
                                    <option value="reagendar">Reagendar</option>
                                </select>
                                <select id="filter-origem-acao" class="filter-select">
                                    <option value="all">Todas as origens</option>
                                    <option value="marcacao">Marca√ß√£o</option>
                                    <option value="lembrete72h">Lembrete 72h</option>
                                    <option value="desmarcacao">Desmarca√ß√£o</option>
                                </select>
                            </div>
                        </div>
                        <div class="confirmacoes-list" id="acoes-list">
                            <div class="empty-state">
                                <div class="empty-icon">‚úÖ</div>
                                <h3>Nenhuma a√ß√£o pendente</h3>
                                <p>Todas as a√ß√µes foram conclu√≠das. Bom trabalho!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Aba 3: Confirma√ß√£o de Presen√ßa -->
            <div id="confirmacao-tab" class="tab-content">
                <div class="confirmacao-container">
                    <!-- Header com controles -->
                    <div class="confirmacao-header">
                        <h2>Confirma√ß√£o de Presen√ßa</h2>

                        <!-- Status inline (sem bot√µes) -->
                        <div class="header-status header-status-confirmacao">
                            <div class="status-item-inline">
                                <span class="status-label-inline">AGHUse</span>
                                <span class="status-indicator" id="aghuse-indicator">‚ö™ Conectando...</span>
                            </div>
                            <div class="status-item-inline">
                                <span class="status-label-inline">Monitor</span>
                                <span class="status-indicator" id="monitoring-indicator">‚ö™ Iniciando...</span>
                            </div>
                        </div>
                    </div>

                    <!-- Estat√≠sticas -->
                    <div class="confirmacao-stats">
                        <div class="stat-card" data-filter="all" style="cursor: pointer;"
                            title="Clique para ver todos os agendamentos">
                            <div class="stat-icon">üìÖ</div>
                            <div class="stat-value" id="stat-total-confirmacoes">0</div>
                            <div class="stat-label">Todos os Agendamentos</div>
                        </div>
                        <div class="stat-card stat-success" data-filter="confirmed" style="cursor: pointer;"
                            title="Clique para filtrar confirmadas">
                            <div class="stat-icon">‚úÖ</div>
                            <div class="stat-value" id="stat-confirmadas">0</div>
                            <div class="stat-label">Confirmadas</div>
                        </div>
                        <div class="stat-card stat-declined" data-filter="declined" style="cursor: pointer;"
                            title="Clique para filtrar n√£o poder√£o ir">
                            <div class="stat-icon">‚ùå</div>
                            <div class="stat-value" id="stat-declinadas">0</div>
                            <div class="stat-label">N√£o Poder√£o Ir</div>
                        </div>
                        <div class="stat-card stat-not-scheduled" data-filter="not_scheduled" style="cursor: pointer;"
                            title="Clique para filtrar n√£o agendou">
                            <div class="stat-icon">‚ö†Ô∏è</div>
                            <div class="stat-value" id="stat-nao-agendou">0</div>
                            <div class="stat-label">N√£o Agendou</div>
                        </div>
                        <div class="stat-card stat-pending" data-filter="pending" style="cursor: pointer;"
                            title="Clique para filtrar aguardando">
                            <div class="stat-icon">‚è≥</div>
                            <div class="stat-value" id="stat-pendentes">0</div>
                            <div class="stat-label">Aguardando<br>Confirma√ß√£o</div>
                        </div>
                    </div>

                    <!-- Lista de confirma√ß√µes -->
                    <div class="confirmacoes-list-container">
                        <div class="list-header">
                            <h3>üìã Consultas Recentes</h3>
                            <div class="list-search-controls">
                                <input type="text" id="search-confirmacao" class="search-input"
                                    placeholder="üîç Buscar por nome do paciente..." autocomplete="off" />
                                <label class="checkbox-mostrar-arquivados">
                                    <input type="checkbox" id="mostrar-arquivados-confirmacao" />
                                    <span>üì¶ Mostrar Arquivados</span>
                                </label>
                                <select id="filter-status" class="filter-select">
                                    <option value="all">Todos os status</option>
                                    <option value="confirmed">Confirmadas</option>
                                    <option value="declined">N√£o poder√£o ir</option>
                                    <option value="not_scheduled">N√£o agendou</option>
                                    <option value="pending">Aguardando</option>
                                </select>
                            </div>
                        </div>
                        <div class="confirmacoes-list" id="confirmacoes-list">
                            <div class="empty-state">
                                <div class="empty-icon">üìã</div>
                                <h3>Nenhuma confirma√ß√£o encontrada</h3>
                                <p>Inicie o monitoramento para ver consultas marcadas em tempo real</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Aba 3: Desmarca√ß√£o de Consultas -->
            <div id="desmarcacao-tab" class="tab-content">
                <div class="confirmacao-container">
                    <!-- Header com controles -->
                    <div class="confirmacao-header">
                        <h2>Desmarca√ß√£o de Consultas</h2>

                        <!-- Status inline (com bot√£o pr√≥prio) -->
                        <div class="header-status header-status-desmarcacao">
                            <div class="status-item-inline">
                                <span class="status-label-inline">AGHUse</span>
                                <span class="status-indicator" id="aghuse-indicator-desmarcacao">‚ö™ Conectando...</span>
                            </div>
                            <div class="status-item-inline">
                                <span class="status-label-inline">Monitor</span>
                                <span class="status-indicator" id="monitoring-indicator-desmarcacao">‚ö™
                                    Iniciando...</span>
                            </div>
                        </div>
                    </div>

                    <!-- Estat√≠sticas -->
                    <div class="confirmacao-stats">
                        <div class="stat-card" data-filter-desm="all" style="cursor: pointer;"
                            title="Clique para ver todas as desmarca√ß√µes">
                            <div class="stat-icon">üìÖ</div>
                            <div class="stat-value" id="stat-total-desmarcacoes">0</div>
                            <div class="stat-label">Todas Desmarca√ß√µes</div>
                        </div>
                        <div class="stat-card stat-success" data-filter-desm="reagendamento" style="cursor: pointer;"
                            title="Clique para filtrar reagendamento">
                            <div class="stat-icon">‚úÖ</div>
                            <div class="stat-value" id="stat-reagendamento">0</div>
                            <div class="stat-label">Reagendamento</div>
                        </div>
                        <div class="stat-card stat-pending" data-filter-desm="paciente_solicitou"
                            style="cursor: pointer;" title="Clique para filtrar paciente solicitou">
                            <div class="stat-icon">üìù</div>
                            <div class="stat-value" id="stat-paciente-solicitou">0</div>
                            <div class="stat-label">Paciente Solicitou</div>
                        </div>
                        <div class="stat-card stat-declined" data-filter-desm="sem_reagendamento"
                            style="cursor: pointer;" title="Clique para filtrar sem reagendamento">
                            <div class="stat-icon">‚ùå</div>
                            <div class="stat-value" id="stat-sem-reagendamento">0</div>
                            <div class="stat-label">Sem Reagendamento</div>
                        </div>
                        <div class="stat-card stat-pending" data-filter-desm="pending" style="cursor: pointer;"
                            title="Clique para filtrar aguardando confirma√ß√£o">
                            <div class="stat-icon">‚è≥</div>
                            <div class="stat-value" id="stat-aguardando-confirmacao-desm">0</div>
                            <div class="stat-label">Aguardando<br>Confirma√ß√£o</div>
                        </div>
                    </div>

                    <!-- Lista de desmarca√ß√µes -->
                    <div class="confirmacoes-list-container">
                        <div class="list-header">
                            <h3>Consultas Desmarcadas</h3>
                            <div class="list-search-controls">
                                <input type="text" id="search-desmarcacao" class="search-input"
                                    placeholder="üîç Buscar por nome do paciente..." autocomplete="off" />
                                <label class="checkbox-mostrar-arquivados">
                                    <input type="checkbox" id="mostrar-arquivados-desmarcacao" />
                                    <span>üì¶ Mostrar Arquivados</span>
                                </label>
                                <select id="filter-status-desmarcacao" class="filter-select">
                                    <option value="all">Todos os status</option>
                                    <option value="reagendamento">Reagendamento</option>
                                    <option value="paciente_solicitou">Paciente solicitou</option>
                                    <option value="sem_reagendamento">Sem reagendamento</option>
                                    <option value="pending">Aguardando</option>
                                </select>
                            </div>
                        </div>
                        <div class="confirmacoes-list" id="desmarcacoes-list">
                            <div class="empty-state">
                                <div class="empty-icon">üìã</div>
                                <h3>Nenhuma desmarca√ß√£o encontrada</h3>
                                <p>Aguardando consultas desmarcadas...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Aba 4: Notifica√ß√£o aos Faltantes -->
            <div id="notificacao-tab" class="tab-content">
                <div class="confirmacao-container">
                    <!-- Header com controles (igual √†s outras abas) -->
                    <div class="confirmacao-header">
                        <h2>Notifica√ß√£o aos Faltantes</h2>

                        <!-- Status inline (com bot√£o pr√≥prio) -->
                        <div class="header-status">
                            <div class="status-item-inline">
                                <span class="status-label-inline">AGHUse</span>
                                <span class="status-indicator" id="aghuse-indicator-notificacao">‚ö™ Conectando...</span>
                            </div>
                            <div class="status-item-inline">
                                <span class="status-label-inline">Monitor</span>
                                <span class="status-indicator" id="monitoring-indicator-notificacao">‚ö™
                                    Iniciando...</span>
                            </div>
                        </div>
                    </div>

                    <!-- Conte√∫do -->
                    <div style="padding: 40px; text-align: center;">
                        <p style="font-size: 16px; color: #64748b; margin-bottom: 30px;">Esta funcionalidade ser√°
                            configurada ap√≥s integra√ß√£o com o sistema AGHUse.</p>
                        <div
                            style="background: #e0f2fe; border-left: 4px solid #0891b2; padding: 24px; border-radius: 8px; text-align: left; max-width: 600px; margin: 0 auto;">
                            <h3 style="color: #0891b2; margin: 0 0 16px 0; font-size: 18px;">Funcionalidades planejadas:
                            </h3>
                            <ul style="margin: 0; padding-left: 24px; color: #334155;">
                                <li style="margin-bottom: 8px;">Identifica√ß√£o autom√°tica de faltas</li>
                                <li style="margin-bottom: 8px;">Envio de mensagem solicitando justificativa</li>
                                <li style="margin-bottom: 8px;">Registro de motivos de falta</li>
                                <li style="margin-bottom: 0;">Integra√ß√£o com banco de dados AGHUse</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Aba 5: Consultas do Paciente -->
            <div id="consultas-paciente-tab" class="tab-content">
                <div class="confirmacao-container">
                    <!-- Header -->
                    <div class="confirmacao-header">
                        <h2>Consultas do Paciente</h2>

                        <!-- Status inline -->
                        <div class="header-status">
                            <div class="status-item-inline">
                                <span class="status-label-inline">AGHUse</span>
                                <span class="status-indicator" id="aghuse-indicator-consultas-paciente">Conectando...</span>
                            </div>
                        </div>
                    </div>

                    <!-- Filtros de busca -->
                    <div class="search-filters" style="background: #f8fafc; border-radius: 12px; padding: 24px; margin-bottom: 24px;">
                        <h3 style="margin: 0 0 16px 0; color: #334155; font-size: 16px;">Buscar Paciente</h3>
                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr auto; gap: 16px; align-items: end;">
                            <div class="form-group" style="margin: 0;">
                                <label for="filtro-nome" style="display: block; font-size: 13px; color: #64748b; margin-bottom: 6px;">Nome</label>
                                <input type="text" id="filtro-nome" placeholder="Digite o nome do paciente"
                                    style="width: 100%; padding: 10px 12px; border: 1px solid #e2e8f0; border-radius: 8px; font-size: 14px;">
                            </div>
                            <div class="form-group" style="margin: 0;">
                                <label for="filtro-cpf" style="display: block; font-size: 13px; color: #64748b; margin-bottom: 6px;">CPF</label>
                                <input type="text" id="filtro-cpf" placeholder="000.000.000-00" maxlength="14"
                                    style="width: 100%; padding: 10px 12px; border: 1px solid #e2e8f0; border-radius: 8px; font-size: 14px;">
                            </div>
                            <div class="form-group" style="margin: 0;">
                                <label for="filtro-prontuario" style="display: block; font-size: 13px; color: #64748b; margin-bottom: 6px;">Prontuario</label>
                                <input type="text" id="filtro-prontuario" placeholder="Ex: 123456" maxlength="10"
                                    style="width: 100%; padding: 10px 12px; border: 1px solid #e2e8f0; border-radius: 8px; font-size: 14px;">
                            </div>
                            <button id="btn-buscar-paciente"
                                style="background: #0cb7f2; color: white; border: none; padding: 10px 24px; border-radius: 8px; font-size: 14px; font-weight: 500; cursor: pointer; display: flex; align-items: center; gap: 8px; height: 42px;">
                                <svg viewBox="0 0 24 24" width="18" height="18">
                                    <path fill="currentColor"
                                        d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" />
                                </svg>
                                Buscar
                            </button>
                        </div>
                        <p style="margin: 12px 0 0 0; font-size: 12px; color: #94a3b8;">Preencha pelo menos um campo para buscar</p>
                    </div>

                    <!-- Informacoes do paciente encontrado -->
                    <div id="paciente-info" style="display: none; background: #e0f2fe; border-radius: 12px; padding: 20px; margin-bottom: 24px;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <h3 id="paciente-nome" style="margin: 0 0 4px 0; color: #0369a1; font-size: 18px;">Nome do Paciente</h3>
                                <p style="margin: 0; color: #0c4a6e; font-size: 14px;">
                                    <span id="paciente-prontuario-label">Prontuario: </span><strong id="paciente-prontuario-valor">-</strong>
                                    <span style="margin: 0 12px;">|</span>
                                    <span>CPF: </span><strong id="paciente-cpf-valor">-</strong>
                                    <span style="margin: 0 12px;">|</span>
                                    <span>Tel: </span><strong id="paciente-telefone-valor">-</strong>
                                </p>
                            </div>
                            <button id="btn-limpar-busca"
                                style="background: transparent; border: 1px solid #0369a1; color: #0369a1; padding: 8px 16px; border-radius: 6px; font-size: 13px; cursor: pointer;">
                                Limpar
                            </button>
                        </div>
                    </div>

                    <!-- Loading -->
                    <div id="consultas-loading" style="display: none; text-align: center; padding: 40px;">
                        <div class="spinner" style="width: 40px; height: 40px; border: 3px solid #e2e8f0; border-top-color: #0cb7f2; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 16px;"></div>
                        <p style="color: #64748b;">Buscando consultas...</p>
                    </div>

                    <!-- Tabela de consultas -->
                    <div id="consultas-resultado" style="display: none;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                            <h3 style="margin: 0; color: #334155; font-size: 16px;">Consultas Agendadas</h3>
                            <span id="consultas-count" style="background: #0cb7f2; color: white; padding: 4px 12px; border-radius: 20px; font-size: 13px;">0 consultas</span>
                        </div>
                        <div class="table-container" style="background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                            <table style="width: 100%; border-collapse: collapse;">
                                <thead>
                                    <tr style="background: #f1f5f9;">
                                        <th style="padding: 14px 16px; text-align: left; font-size: 13px; color: #475569; font-weight: 600;">Data/Hora</th>
                                        <th style="padding: 14px 16px; text-align: left; font-size: 13px; color: #475569; font-weight: 600;">Especialidade</th>
                                        <th style="padding: 14px 16px; text-align: left; font-size: 13px; color: #475569; font-weight: 600;">Profissional</th>
                                        <th style="padding: 14px 16px; text-align: left; font-size: 13px; color: #475569; font-weight: 600;">Local</th>
                                        <th style="padding: 14px 16px; text-align: center; font-size: 13px; color: #475569; font-weight: 600;">Situacao</th>
                                    </tr>
                                </thead>
                                <tbody id="consultas-tbody">
                                    <!-- Consultas serao inseridas aqui via JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Estado vazio -->
                    <div id="consultas-empty" style="display: none; text-align: center; padding: 60px 40px;">
                        <svg viewBox="0 0 24 24" width="64" height="64" style="color: #cbd5e1; margin-bottom: 16px;">
                            <path fill="currentColor"
                                d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM9 10H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2z" />
                        </svg>
                        <h3 style="margin: 0 0 8px 0; color: #64748b; font-size: 18px;">Nenhuma consulta encontrada</h3>
                        <p style="margin: 0; color: #94a3b8; font-size: 14px;">Este paciente nao possui consultas agendadas no momento</p>
                    </div>

                    <!-- Mensagem inicial -->
                    <div id="consultas-inicial" style="text-align: center; padding: 60px 40px;">
                        <svg viewBox="0 0 24 24" width="64" height="64" style="color: #cbd5e1; margin-bottom: 16px;">
                            <path fill="currentColor"
                                d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" />
                        </svg>
                        <h3 style="margin: 0 0 8px 0; color: #64748b; font-size: 18px;">Busque um paciente</h3>
                        <p style="margin: 0; color: #94a3b8; font-size: 14px;">Use os filtros acima para encontrar as consultas de um paciente</p>
                    </div>
                </div>
            </div>

            <!-- Aba 6: Configura√ß√µes -->
            <div id="config-tab" class="tab-content">
                <div class="config-container">
                    <h2 class="config-title">Configura√ß√µes do Sistema</h2>

                    <!-- Sub-Abas -->
                    <div class="config-tabs">
                        <button class="config-tab-btn" data-config-tab="mensagens">
                            <svg viewBox="0 0 24 24" width="20" height="20">
                                <path fill="currentColor"
                                    d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z" />
                            </svg>
                            <span>Mensagens</span>
                        </button>
                        <button class="config-tab-btn active" data-config-tab="usuarios">
                            <svg viewBox="0 0 24 24" width="20" height="20">
                                <path fill="currentColor"
                                    d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z" />
                            </svg>
                            <span>Usu√°rios</span>
                        </button>
                        <button class="config-tab-btn" data-config-tab="sistema">
                            <svg viewBox="0 0 24 24" width="20" height="20">
                                <path fill="currentColor"
                                    d="M13 3h-2v10h2V3zm4.83 2.17l-1.42 1.42C17.99 7.86 19 9.81 19 12c0 3.87-3.13 7-7 7s-7-3.13-7-7c0-2.19 1.01-4.14 2.58-5.42L6.17 5.17C4.23 6.82 3 9.26 3 12c0 4.97 4.03 9 9 9s9-4.03 9-9c0-2.74-1.23-5.18-3.17-6.83z" />
                            </svg>
                            <span>Sistema</span>
                        </button>
                    </div>

                    <!-- Conte√∫do das Sub-Abas -->
                    <div class="config-tab-content">
                        <!-- Sub-Aba: Usu√°rios -->
                        <div id="usuarios-content" class="config-content active">
                            <div class="section-header">
                                <p style="color: #666; font-size: 1.1rem; text-align: center; padding: 3rem 2rem;">
                                    üîß <strong>Funcionalidade em Desenvolvimento</strong><br><br>
                                    O gerenciamento de usu√°rios ser√° configurado em breve.
                                </p>
                            </div>
                        </div>

                        <!-- Sub-Aba: Sistema -->
                        <div id="sistema-content" class="config-content" style="display: none;">
                            <div class="section-header">
                                <h3>Informa√ß√µes do Sistema</h3>
                                <p>Detalhes sobre a instala√ß√£o e configura√ß√£o</p>
                            </div>

                            <div class="info-grid">
                                <div class="info-item">
                                    <strong>Vers√£o:</strong>
                                    <span>1.0.0</span>
                                </div>
                                <div class="info-item">
                                    <strong>Usu√°rio:</strong>
                                    <span id="current-user-email">-</span>
                                </div>
                                <div class="info-item">
                                    <strong>Ambiente:</strong>
                                    <span id="environment-name">Desenvolvimento Local</span>
                                </div>
                                <div class="info-item">
                                    <strong>Arquitetura:</strong>
                                    <span>HMASP S√£o Paulo</span>
                                </div>
                                <div class="info-item">
                                    <strong>Backend WhatsApp:</strong>
                                    <span id="whatsapp-backend">localhost:3000</span>
                                </div>
                                <div class="info-item">
                                    <strong>Backend AGHUse:</strong>
                                    <span id="aghuse-backend">localhost:3001</span>
                                </div>
                            </div>

                            <div class="section-header" style="margin-top: 2rem;">
                                <h3>A√ß√µes do Sistema</h3>
                            </div>

                            <div class="system-actions">
                                <button class="system-action-btn" id="clear-cache-btn">
                                    <svg viewBox="0 0 24 24" width="20" height="20">
                                        <path fill="currentColor"
                                            d="M19.35 10.04C18.67 6.59 15.64 4 12 4c-1.48 0-2.85.43-4.01 1.17l1.46 1.46C10.21 6.23 11.08 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3 0 1.13-.64 2.11-1.56 2.62l1.45 1.45C23.16 18.16 24 16.68 24 15c0-2.64-2.05-4.78-4.65-4.96zM3 5.27l2.75 2.74C2.56 8.15 0 10.77 0 14c0 3.31 2.69 6 6 6h11.73l2 2L21 20.73 4.27 4 3 5.27zM7.73 10l8 8H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h1.73z" />
                                    </svg>
                                    Limpar Cache do Navegador
                                </button>
                                <button class="system-action-btn" id="export-data-btn">
                                    <svg viewBox="0 0 24 24" width="20" height="20">
                                        <path fill="currentColor"
                                            d="M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z" />
                                    </svg>
                                    Exportar Dados do Sistema
                                </button>
                                <button class="system-action-btn" id="about-btn">
                                    <svg viewBox="0 0 24 24" width="20" height="20">
                                        <path fill="currentColor"
                                            d="M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" />
                                    </svg>
                                    Sobre o Sistema
                                </button>
                            </div>
                        </div>

                        <!-- Sub-Aba: Mensagens -->
                        <div id="mensagens-content" class="config-content">
                            <div id="mensagens-container">
                                <!-- O componente configuracaoMensagens.js ser√° renderizado aqui -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>


    <!-- Scripts -->
    <script type="module" src="./src/main.js"></script>
</body>

</html>